document.addEventListener("DOMContentLoaded",(()=>{const e={apiKey:"MISSING_ENV_VAR".FIREBASE_API_KEY||"AIzaSyCCEYnTrQHvM_WFMUCGay9JO-jtwaYkQ0Q",authDomain:"MISSING_ENV_VAR".FIREBASE_AUTH_DOMAIN||"she-speaks-2025.firebaseapp.com",projectId:"MISSING_ENV_VAR".FIREBASE_PROJECT_ID||"she-speaks-2025",storageBucket:"MISSING_ENV_VAR".FIREBASE_STORAGE_BUCKET||"she-speaks-2025.firebasestorage.app",messagingSenderId:"MISSING_ENV_VAR".FIREBASE_MESSAGING_SENDER_ID||"908378026473",appId:"MISSING_ENV_VAR".FIREBASE_APP_ID||"1:908378026473:web:e5a3026c96c7894dc51b78",measurementId:"MISSING_ENV_VAR".FIREBASE_MEASUREMENT_ID||"G-VLYD379V3R"};firebase.initializeApp(e);const t=firebase.firestore(),o=document.getElementById("sheSpeaksForm"),s=document.querySelectorAll(".form-section"),n=document.getElementById("progressFill"),a=document.getElementById("progressText"),r=document.getElementById("thankYou"),l=document.getElementById("submitBtn"),c=document.getElementById("finalSubmitBtn"),i=document.querySelectorAll(".next-btn"),d=document.querySelectorAll(".prev-btn"),E=document.querySelectorAll('input[type="range"]');let m=1;const u=s.length,y=()=>{const e=(m-1)/(u-1)*100;n.style.width=`${e}%`,a.textContent=1===m?"Let's begin your story...":m===u?"Final step â€” almost done!":`Section ${m} of ${u}`},p=e=>{s.forEach((e=>{e.classList.remove("active"),e.style.display="none"}));const t=document.querySelector(`.form-section[data-section="${e}"]`);t&&(t.classList.add("active"),t.style.display="block",window.scrollTo({top:t.offsetTop-50,behavior:"smooth"})),y()};i.forEach((e=>{e.addEventListener("click",(()=>{m<u&&(m++,p(m))}))})),d.forEach((e=>{e.addEventListener("click",(()=>{m>1&&(m--,p(m))}))})),c.addEventListener("click",(()=>{l.click()})),o.addEventListener("submit",(async e=>{e.preventDefault();try{const e=new FormData(o),s={},l=document.querySelectorAll('input[name="help"]:checked'),c=Array.from(l).map((e=>e.value));e.forEach(((e,t)=>{"help"!==t&&(s[t]=e)})),s.help=c,s.submittedAt=firebase.firestore.FieldValue.serverTimestamp(),console.log("Submitting data to Firebase:",s),await t.collection("responses").add(s),console.log("Form data saved to Firebase successfully!"),o.style.display="none",r.style.display="block",n.style.width="100%",a.textContent="Thank you for your voice!",window.scrollTo({top:0,behavior:"smooth"})}catch(e){console.error("Error saving to Firebase:",e),alert("There was an error submitting your response. Please try again later.")}})),E.forEach((e=>{const t=document.querySelector(`.slider-value[data-slider="${e.name}"]`);e.addEventListener("input",(()=>{t&&(t.textContent=e.value)}))})),s.forEach(((e,t)=>{0===t?(e.classList.add("active"),e.style.display="block"):e.style.display="none"})),y()}));